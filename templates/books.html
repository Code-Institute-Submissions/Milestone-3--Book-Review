{% extends 'base.html'%}
{% block content %}
  <ul class="collapsible">
    {% for book in books %}
    <div class="row">
        <div class="col s12 m6">
            <div class="card blue-grey darken-1">
                <div class="card-content white-text">
                    <span class="card-title">{{book.name}}</span>
                    <span class="card-title">{{book.author}}</span>
                    <span class="card-title">{{book.genre_name}}</span>
                </div>
                <div class="card-action">
                     <!-- Modal Trigger -->
                    <button data-target="modal1" class="btn modal-trigger">Modal</button>
                    <!-- Modal Structure -->
                    <div id="modal1" class="modal">
                        <div class="modal-content">
                            <h4>{{book.name}} by {{book.author}}</h4>
                            <h5>{{book.isbn}}</h5>
                            <p>{{book.review}}</p>
                        </div>
                        <span>Read this book? Please leave a review</span>
                        <div class="input-field col s12">
                            <textarea id="review" name="review" type="textarea" class="materialize-textarea" minlength="200" required>{{book.review}}</textarea>
                            <label for="review">Review</label>
                            <span class="helper-text" data-error="wrong" data-success="right">Minimum 200 letters</span>
                        </div>
                        <div>
                            <button class="btn waves-effect waves-light" type="submit" name="action">Submit
                            <i class="material-icons right">send</i>
                            </button>
                        </div>
                        <div class="modal-footer">
                            <a href="#!" class="modal-close waves-effect waves-green btn-flat">Close</a>
                        </div>
                    </div>
                    <a href ="{{book.book_link}}">Buy this book!</a>
                    <a href="{{url_for('edit_book', book_id=book._id)}}" class="waves-effect waves-light btn-small">Eddit</a>
                    <a href="{{url_for('delete_book', book_id=book._id)}}" class="waves-effect waves-light btn-small">Delete</a>
                    <!--Vote buttons-->
                    <a href="{{url_for('upvote_book', book_id=book._id)}}" id="votes" class="waves-effect waves-light btn-small" type="submit" name="action"><i id="votes"class="material-icons right">arrow_upward</i>Upvote!</a>
                    <a href="{{url_for('upvote_book', book_id=book._id)}}" id="votes" class="waves-effect waves-light btn-small" type="submit" name="action"><i id="votes"class="material-icons right">arrow_downward</i>Downvote</a>
                    <span>{{book.votes}}</span>
                </div>
            </div>
        </div>
    </div>
    <!--
    <li>
        <div class="collapsible-header">
            <i class="material-icons">expand_more</i>
            <a href="{{url_for('edit_book', book_id=book._id)}}" class="waves-effect waves-light btn-small">Eddit</a>
            {{book.name}} 
            {{book.author}}
            {{book.genre_name}}
            <a href="{{url_for('delete_book', book_id=book._id)}}" class="waves-effect waves-light btn-small">Delete</a>
        </div>
        <div class="collapsible-body">
            <span>
                {{book.review}}
                {{book.isbn}}
                <a href ="{{book.book_link}}">{{book.book_link}}</a>
            </span>
        </div>
    </li>
    -->
    {% endfor %}
  </ul>
{% endblock %}